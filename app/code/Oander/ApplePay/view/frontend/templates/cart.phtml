<div id='cart-applepay'></div>
<script type="text/javascript">
    require(['jquery', 'applePay', 'domReady!'],function($) {
        var selectors = {
            applepayObject: 'applepay-object'
        };
        if (document.getElementById('cart-applepay').innerHTML === '') {
            var applePayObject = document.getElementById(selectors.applepayObject);
            var applePay = $(applePayObject).data('mageApplepay');
            if(typeof applePay !== 'undefined') {
                addCartApplePayButton();
            }
            else {
                applePayObject.addEventListener("init", function() {addCartApplePayButton()});
            }
        }

        function addCartApplePayButton() {
            var applePayObject = document.getElementById(selectors.applepayObject);
            var applePay = $(applePayObject).data('mageApplepay');
            if (applePay.canUseApplePay('<?php echo \Oander\ApplePay\Enum\DisplayIn::CART; ?>')) {
                applePay.addCartButton(document.getElementById('cart-applepay'));
            }
        }
    });
</script>