<?php
/**
 *   /$$$$$$   /$$$$$$  /$$   /$$ /$$$$$$$  /$$$$$$$$ /$$$$$$$
 *  /$$__  $$ /$$__  $$| $$$ | $$| $$__  $$| $$_____/| $$__  $$
 * | $$  \ $$| $$  \ $$| $$$$| $$| $$  \ $$| $$      | $$  \ $$
 * | $$  | $$| $$$$$$$$| $$ $$ $$| $$  | $$| $$$$$   | $$$$$$$/
 * | $$  | $$| $$__  $$| $$  $$$$| $$  | $$| $$__/   | $$__  $$
 * | $$  | $$| $$  | $$| $$\  $$$| $$  | $$| $$      | $$  \ $$
 * |  $$$$$$/| $$  | $$| $$ \  $$| $$$$$$$/| $$$$$$$$| $$  | $$
 *  \______/ |__/  |__/|__/  \__/|_______/ |________/|__/  |__/
 *
 *
 *.......................................................................................................
 *................................................/&&&&&&&&&\............................................
 *..........................................*&&&&&&&&&&&&&&&&&&&&&&*.....................................
 *.......................................*&&&&&&&&&&&&&&&&&&&&&&&&&&&*...................................
 *....................................*&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*...............................
 *..................................*&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*.............................
 *................................*&&&&&&&&&&&*__   &&&&&&&&&&&&&&&&&&&&&&&*.............................
 *...............................*&&&&&&&&&&&&&&&*________*&&&&&&&&&&&&&&&&&*............................
 *.............................*&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*..........................
 *............................*&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*..........................
 *............................*&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*.........................
 *...........................*&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*........................
 *...........................*&&&&&&&&&&*...&&&&&&&&&&&&&&&&&&*...&&&&&&&&&&&&&&*........................
 *...........................*&&&&&&\                                   /&&&&&&&&*.......................
 *...........................*&&&&&&&.ˇ*****ˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇˇ*****ˇ.&&&&&&&*........................
 *............................*&&&&&&|.                                .|&&&&&&&*........................
 *......................../&|*&&&&&&&\.  *                       *    ./&&&&&&&*.........................
 *.....................*&&&&&&|.&&&&&&\.  *\&&&&\.        ./&&&&/*   ./&&&&&&&*..........................
 *...................*&&&&&&&/&&&&&&&&&\.    .&&&&&.    .&&&&&.     ./&&&&&&&*...........................
 *.................*&&&&&&.&&&&&&&&&&&&&\.    \&&&/      \&&&/    ./&&&&&&&&*............................
 *.................&&&&&&&&.&&&&&&&&&&&&&&\.                    ./&&&&&&&&&*.............................
 *.................&&&&&&&.&&&&     *&&&&&&&&&\.              ./&&&&&&&&&*...............................
 *.................*&&&&.&&&&        *&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&*..................................
 *....................*&&&&.&&&&.       *&&&&&&&&&&&&&&&&&&&&&&&&&&&*....................................
 *.....................*&&.   *&*           *&&&&&&&&&&&&&&&&&&&*........................................
 *..............................................*\&&&&&&&&&/*............................................
 *._   _ _____ _   _      _          _____   _         _____ _____     _         __  __           _____
 *| \ | |_   _| \ | |    | |  /\    / ____| (_)       |  __ \_   _|   | |  /\   |  \/  |   /\    / ____|
 *|  \| | | | |  \| |    | | /  \  | (___    _ _ __   | |__) || |     | | /  \  | \  / |  /  \  | (___
 *| . ` | | | | . ` |_   | |/ /\ \  \___ \  | | '_ \  |  ___/ | | _   | |/ /\ \ | |\/| | / /\ \  \___ \
 *| |\  |_| |_| |\  | |__| / ____ \ ____) | | | | | | | |    _| || |__| / ____ \| |  | |/ ____ \ ____) |
 *|_| \_|_____|_| \_|\____/_/    \_\_____/  |_|_| |_| |_|   |_____\____/_/    \_\_|  |_/_/    \_\_____/
 *
 *
 *
 * AbstractItem
 * @team    Ninjas in Pijamas
 * @author  Róbert Betlen <robert.betlen@oander.hu>
 * @license Oander Media Kft. (http://www.oander.hu)
 */
namespace Oander\IstyleCustomization\Plugin\Checkout\CustomerData;

/**
 * Class AbstractItem
 * @package Oander\IstyleCustomization\Plugin\Checkout\CustomerData
 */
class AbstractItem
{
    /**
     * @var \Magento\Catalog\Api\Data\ProductInterface
     */
    protected $productInterface;

    /**
     * AbstractItem constructor.
     * @param \Magento\Catalog\Api\Data\ProductInterface $productInterface
     */
    public function __construct(

        \Magento\Catalog\Api\Data\ProductInterface $productInterface
    ) {
        $this->productInterface = $productInterface;

    }

    /**
     * @param \Magento\Checkout\CustomerData\AbstractItem $subject
     * @param $result
     * @return mixed
     */
    public function afterGetItemData(\Magento\Checkout\CustomerData\AbstractItem $subject, $result)
    {

        $simpleProduct = $this->productInterface->loadByAttribute('sku', $result['product_sku']);
        if ($simpleProduct) {
            $result['product_name'] = $simpleProduct->getName();
        }

        return $result;
    }

}
